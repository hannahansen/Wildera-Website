<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wildera | Earrings</title>
  <link href="earrings.css" rel="stylesheet" type="text/css">
</head>
<body>

<header>
  <div class="top-header">
    <h1 class="header-title" aria-label="Wildera">
      <span class="logo-wild">WILD</span><span class="logo-era">ERA</span>
    </h1>

    <input type="checkbox" id="menu-toggle"/>
    <label for="menu-toggle" class="menu-button"><span>Menu</span></label>

    <nav class="menu">
      <ul>
        <li><a href="index.html#home">Home</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="index.html#about">About</a></li>
        <li><a href="faq.html">FAQ</a></li>
        <li><a href="index.html#contact">Contact</a></li>
        <li><a href="cart.html">Cart</a></li>
      </ul>
    </nav>
  </div>
</header>

<main class="product-list">

  <!-- PRODUCT 1 -->
  <section class="product-card" data-product-id="earrings-1" data-product-name="Micro Pave CZ Hoop Earring Set" data-product-price="15" data-product-stock="5" data-stripe-price-id="price_1SggSn3wZkikQ95UyR4psAHL" data-product-image="images/A49A7265.jpg">
    <div class="product-info">
      <h2 class="product-title">Micro Pave CZ Hoop Earring Set</h2>
      <p class="product-subtitle">Two pairs of petite hoops with a clean, sparkly finish.</p>
      <div class="product-meta">
        <span class="product-price"></span>
        <span class="product-stock"></span>
      </div>
      <div class="product-details">
        <p><strong>Materials:</strong> <br>Huggie Earrings: 925 sterling silver (925 stamp) with real 18K gold plating. <br>Stud Earrings: a second pair in stainless steel with 18K gold plating. Both feature cubic zirconia.</p>
        <p><strong>Size:</strong> approx. 10.4mm wide × 13mm long (0.41in × 0.51in)</p>
        <p><strong>Notes:</strong> Micro pave CZ sparkle, lightweight feel, easy everyday hoops.</p>
      </div>
      <p class="product-description">
        A simple, elevated hoop moment. This set includes two pairs of petite earrings. Micro pave cubic zirconia creates a clean sparkle you can wear with anything.
      </p>
      <div class="product-actions">
        <button type="button" class="add-to-cart">Add to cart</button>
        <p class="cart-status" aria-live="polite"></p>
      </div>
    </div>

    <div class="product-media">
      <div class="carousel">
        <button class="carousel-btn prev" type="button" aria-label="Previous photo">‹</button>

        <div class="carousel-track">
          <img class="carousel-slide" src="images/A49A9014.jpg" alt="Photo 1">
          <img class="carousel-slide" src="images/A49A9024.jpg" alt="Photo 2">
          <img class="carousel-slide" src="images/A49A9033.jpg" alt="Photo 3">
        </div>

        <button class="carousel-btn next" type="button" aria-label="Next photo">›</button>
      </div>
    </div>
  </section>

  <!-- PRODUCT 2 -->
  <section class="product-card" data-product-id="earrings-2" data-product-name="Another Product" data-product-price="34" data-product-stock="3" data-stripe-price-id="price_1SggSn3wZkikQ95UyR4psAHL" data-product-image="images/A49A7240.jpg">
    <div class="product-info">
      <h2 class="product-title">Another Product</h2>
      <p class="product-subtitle">Another short vibe line.</p>
      <div class="product-meta">
        <span class="product-price"></span>
        <span class="product-stock"></span>
      </div>

      <div class="product-details">
        <p><strong>Materials:</strong> Add materials</p>
        <p><strong>Size:</strong> Add size</p>
        <p><strong>Notes:</strong> Add notes</p>
      </div>

      <p class="product-description">Product description goes here.</p>
      <div class="product-actions">
        <button type="button" class="add-to-cart">Add to cart</button>
        <p class="cart-status" aria-live="polite"></p>
      </div>
    </div>

    <div class="product-media">
      <div class="carousel">
        <button class="carousel-btn prev" type="button" aria-label="Previous photo">‹</button>

        <div class="carousel-track">
          <img class="carousel-slide" src="images/A49A7240.jpg" alt="Photo 1">
          <img class="carousel-slide" src="images/A49A7265.jpg" alt="Photo 2">
        </div>

        <button class="carousel-btn next" type="button" aria-label="Next photo">›</button>
      </div>
    </div>
  </section>

</main>

<section class="connect">
  <div class="connect-content">
    <h2>Connect On Social Media!</h2>
    <a href="https://www.tiktok.com/@wildera.jewelry/">
      <img src="tiktok.png" alt="Tiktok">
    </a>
    <a href="https://www.instagram.com/wildera.jewelry">
      <img src="instagram.png" alt="Instagram">
    </a>
  </div>
</section>

<footer class="footer">
  <div class="footer-content">
    <p>© 2025 Wildera. All rights reserved.</p>
  </div>
</footer>

<script>
  (function () {
    // --- Carousel ---
    document.querySelectorAll('.carousel').forEach((carousel) => {
      const slides = Array.from(carousel.querySelectorAll('.carousel-slide'));
      const prev = carousel.querySelector('.carousel-btn.prev');
      const next = carousel.querySelector('.carousel-btn.next');
      if (!slides.length || !prev || !next) return;

      let index = 0;
      function render() {
        slides.forEach((img, i) => (img.style.display = i === index ? 'block' : 'none'));
      }

      prev.addEventListener('click', () => {
        index = (index - 1 + slides.length) % slides.length;
        render();
      });

      next.addEventListener('click', () => {
        index = (index + 1) % slides.length;
        render();
      });

      render();
    });

    // --- Cart (localStorage) ---
    const CART_KEY = 'wildera_cart_v1';

    function loadCart() {
      try {
        return JSON.parse(localStorage.getItem(CART_KEY) || '[]');
      } catch {
        return [];
      }
    }

    function saveCart(cart) {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
    }

    function getInCartQty(cart, id) {
      const found = cart.find((i) => i.id === id);
      return found ? Number(found.qty || 0) : 0;
    }

    function setStatus(card, text) {
      const el = card.querySelector('.cart-status');
      if (el) el.textContent = text;
    }

    function refreshButtons() {
      const cart = loadCart();

      document.querySelectorAll('.product-card[data-product-id]').forEach((card) => {
        const id = card.getAttribute('data-product-id');
        const stock = Number(card.getAttribute('data-product-stock') || 0);
        const inCart = getInCartQty(cart, id);
        const btn = card.querySelector('.add-to-cart');
        if (!btn) return;

        const priceEl = card.querySelector('.product-price');
        const stockEl = card.querySelector('.product-stock');
        const price = Number(card.getAttribute('data-product-price') || 0);
        if (priceEl) priceEl.textContent = `$${price.toFixed(2)}`;
        if (stockEl) {
          const remainingNow = Math.max(0, stock - inCart);
          stockEl.textContent = `In stock: ${remainingNow}`;
        }

        if (stock <= 0) {
          btn.disabled = true;
          btn.textContent = 'Sold out';
          setStatus(card, '');
          return;
        }

        const remaining = Math.max(0, stock - inCart);

        if (remaining <= 0) {
          btn.disabled = true;
          btn.textContent = 'In cart (max)';
          setStatus(card, 'Max quantity reached for this item.');
        } else {
          btn.disabled = false;
          btn.textContent = 'Add to cart';
          setStatus(card, '');
        }
      });
    }

    document.querySelectorAll('.product-card[data-product-id]').forEach((card) => {
      const btn = card.querySelector('.add-to-cart');
      if (!btn) return;

      btn.addEventListener('click', () => {
        const id = card.getAttribute('data-product-id');
        const name = card.getAttribute('data-product-name') || 'Item';
        const price = Number(card.getAttribute('data-product-price') || 0);
        const stock = Number(card.getAttribute('data-product-stock') || 0);
        const image = card.getAttribute('data-product-image') || '';
        const stripePriceId = card.getAttribute('data-stripe-price-id');

        const cart = loadCart();
        const currentQty = getInCartQty(cart, id);

        if (currentQty >= stock) {
          refreshButtons();
          return;
        }

        const existing = cart.find((i) => i.id === id);
        if (existing) {
        existing.qty = Number(existing.qty || 1) + 1;

        if (!existing.stripePriceId) existing.stripePriceId = stripePriceId;
        } else {
        cart.push({ id, name, price, qty: 1, stock, image, stripePriceId });
        }

        saveCart(cart);
        refreshButtons();
      });
    });

    window.addEventListener('storage', refreshButtons);
    refreshButtons();
  })();
</script>

</body>
</html>